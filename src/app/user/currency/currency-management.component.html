<div class="currency-container">
  <h2>Currency Management</h2>

  <!-- Search and Add Button -->
  <div class="toolbar">
    <mat-form-field appearance="fill" class="search-box">
      <mat-label>Search Currency</mat-label>
      <input matInput [(ngModel)]="searchTerm" placeholder="Search by currency name" />
    </mat-form-field>
    <button mat-raised-button color="primary" (click)="openForm()">Add Currency</button>
  </div>

  <!-- Currency Table -->
  <table mat-table [dataSource]="currencies" class="mat-elevation-z8 full-width-table">
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>

    <!-- Code Column -->
    <ng-container matColumnDef="code">
      <th mat-header-cell *matHeaderCellDef> Code </th>
      <td mat-cell *matCellDef="let element"> {{element.code}} </td>
    </ng-container>

    <!-- Symbol Column -->
    <ng-container matColumnDef="symbol">
      <th mat-header-cell *matHeaderCellDef> Symbol </th>
      <td mat-cell *matCellDef="let element"> {{element.symbol}} </td>
    </ng-container>

    <!-- Country Column -->
    <ng-container matColumnDef="country">
      <th mat-header-cell *matHeaderCellDef> Country </th>
      <td mat-cell *matCellDef="let element"> {{element.country}} </td>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let element"> {{element.status}} </td>
    </ng-container>

    <!-- Conversion Rate Column -->
    <ng-container matColumnDef="conversionRate">
      <th mat-header-cell *matHeaderCellDef> Conversion Rate </th>
      <td mat-cell *matCellDef="let element"> {{element.conversionRate}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['name', 'code', 'symbol', 'country', 'status', 'conversionRate']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['name', 'code', 'symbol', 'country', 'status', 'conversionRate']"></tr>
  </table>

  <!-- Add Currency Form -->
  <div *ngIf="showForm" class="currency-form">
    <h3>Add New Currency</h3>

    <div class="form-section">
      <mat-form-field appearance="fill">
        <mat-label>Currency Name</mat-label>
        <input matInput [(ngModel)]="currencyName" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Currency Symbol</mat-label>
        <input matInput [(ngModel)]="currencySymbol" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Conversion Rate (to USD)</mat-label>
        <input matInput [(ngModel)]="conversionRate" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Select Country</mat-label>
        <mat-select [(ngModel)]="selectedCountry">
          <mat-option *ngFor="let country of countries" [value]="country">
            {{ country.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <button mat-stroked-button color="accent" (click)="generateLimits()">Generate 100 Limits</button>
     <div class="currency-limits" *ngIf="showLimits">
            <h3>Currency Limits</h3>
    <div class="limits-list">
      <div class="limit-row" *ngFor="let limit of limits">
        <mat-checkbox [(ngModel)]="limit.selected">{{ limit.code }}</mat-checkbox>
        <mat-form-field appearance="outline" class="limit-input">
          <mat-label>Min</mat-label>
          <input matInput [(ngModel)]="limit.min" />
        </mat-form-field>
        <mat-form-field appearance="outline" class="limit-input">
          <mat-label>Max</mat-label>
          <input matInput [(ngModel)]="limit.max" />
        </mat-form-field>
      </div>
    </div>
     </div>


    <!-- Action Buttons -->
    <div class="action-buttons">
      <button mat-raised-button color="primary" (click)="save()">Save</button>
      <button mat-raised-button color="warn" (click)="cancel()">Cancel</button>
    </div>
  </div>
</div>
